/* Global styles */
/*
================================================================================
 Comprehensive Style Guide for Mapsite Web Application

This CSS file provides the complete styling for the Mapsite web application, covering global layout, navigation, sidebar, map, popups, legends, layer controls, and responsive design. Below is an overview of what is styled, how, and why:

1. Global Styles:
  - Resets default browser margins/padding for `body`, `html`, and sets a consistent font family and base font size for readability.
  - Ensures images, iframes, and videos scale responsively.
  - Uses `.hidden` class to toggle visibility of elements.

2. Layout & Containers:
  - `.container`, `.content`, `main`, `header`, `footer` use full width and `box-sizing: border-box` for predictable sizing.
  - Flexbox is used for header and navigation for alignment and spacing.

3. Header & Navigation:
  - `#site-header` is fixed at the top for persistent navigation, with a subtle background and border for separation.
  - Navigation links are styled for clarity, with active states highlighted for user feedback.

4. Main Content & Sidebar:
  - `#main-container` uses flex layout to position sidebar and map.
  - `#sidebar` is fixed, scrollable, and visually separated with box-shadow and border, improving usability for layer/data controls.
  - Responsive adjustments hide sidebar/navigation on small screens for a cleaner mobile experience.

5. Map & Export Panel:
  - `#map` is absolutely positioned to fill available space below the header.
  - `#exportPanel` and related buttons are styled for clarity and accessibility, with hover effects for interactivity.

6. Layer Controls:
  - `.layer-controls` and related elements use fixed positioning, rounded corners, and subtle shadows for a modern UI.
  - Custom scrollbars and fade effects enhance usability for long lists.
  - Layer checkboxes and groups are styled for clarity and accessibility, with accent colors for active states.

7. Popups:
  - Popups for listed buildings and other features are styled for readability, with tables, close buttons, and responsive layouts.
  - Popups adapt their position and style depending on whether they appear in the sidebar or as overlays.

8. Legends:
  - `.map-legend` and specific legend classes visually represent map features (e.g., land use, heritage, streetlighting) using colors, patterns, and icons.
  - Legends are positioned for visibility and adapt to screen size.

9. Search & About Page:
  - Search bar and about content are styled for clarity, accessibility, and responsive layout.

10. Responsive Design:
  - Multiple media queries ensure the site is usable and visually appealing on all devices, adjusting font sizes, layout, and visibility as needed.

11. Accessibility & Usability:
  - Focus states, cursor styles, and transitions are used throughout for better user experience.
  - Consistent use of spacing, color, and font weights improves readability and navigation.

This styling approach was chosen to create a clean, modern, and highly usable interface for exploring map data, with clear separation of controls, content, and interactive elements. The use of flexbox, fixed positioning, and responsive design ensures the application works well on both desktop and mobile devices. Custom visual elements (legends, popups, layer controls) are designed for clarity and accessibility, supporting a wide range of user needs.
================================================================================
*/
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: sans-serif;
  overflow: auto; /* Allow scroll for about page */
}

.hidden {
  display: none;
}
body {
  margin: 0;
  padding: 0;
  font-size: 16px;
}
img, iframe, video {
  max-width: 100%;
  height: auto;
}
.container, .content, main, header, footer {
  width: 100%;
  box-sizing: border-box;
}
@media (max-width: 600px) {
  body {
    font-size: 15px;
  }
  h1, h2, h3 {
    font-size: 1.2em;
  }
  nav, .sidebar {
    display: none;
  }
  .main {
    padding: 8px;
  }
}

/* Header and navigation styles */
#site-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #f8f8f8;
  border-bottom: 1px solid #ddd;
  padding: 4px 16px;
  height: 50px;
  box-sizing: border-box;
}

.header-left {
  flex: 1;
}

#site-title {
  flex: 1;
  text-align: left;
  margin: 0;
  font-family: inherit;
  font-size: 2em;
  font-weight: 700;
  color: #222;
}

#site-header nav {
  flex: 1;
  display: flex;
  justify-content: center;
}

/* Navigation links */
#site-header nav a {
  margin-left: 24px;
  text-decoration: none;
  color: #333;
  font-weight: bold;
  font-size: 1rem;
  line-height: 50px;
}

#site-header nav a.active {
  color: #0074d9;
}


/* Main layout */
#main-container {
  height: calc(100vh - 50px); 
  width: 100vw;
  margin-top: 50px;
  display: flex;
  overflow: visible; /* Allow map to receive scroll/pan events */
}

#sidebar {
  position: fixed;
  top: 50px;
  right: 0;
  width: 300px;
  height: calc(100vh - 50px);
  background: #fff;
  z-index: 2100;
  overflow-y: auto;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);
  pointer-events: auto;
  border-left: 2px solid #ddd;
}

#sidebar h2 {
  font-family: inherit;
  font-size: 1.9em;
  font-weight: 700;
  color: #222;
  margin: 0 0 14px 0;
  background: transparent;
  padding: 24px 0 0 0;
  border-bottom: none;
}

#sidebar-content {
  padding-top: 50px; 
  font-size: 0.95em;
  line-height: 1.4em;
  padding-top: 8px;
  padding-bottom: 8px;
  margin-bottom: 8px;
}

#map {
  position: absolute;
  top: 50px; 
  left: 0;
  width: 100vw;
  height: calc(100vh - 50px); 
  z-index: 1;
  pointer-events: auto;
}


/* Export panel styling */
#exportPanel {
  position: absolute;
  top: 50px;
  right: 20px;
  background: white;
  padding: 10px;
  z-index: 2100;
  border-radius: 7px;
  box-shadow: 0px 2px 8px rgba(0,0,0,0.12);
  pointer-events: auto;
}

#exportPanel.hidden,
#sidebar.hidden,
.layer-controls.hidden {
  display: none;
  pointer-events: none;
}


/* Export buttons */
#exportPanel button {
  margin-top: 8px;
  margin-right: 6px;
  padding: 5px 12px;
  font-size: 0.97rem;
  border-radius: 4px;
  border: 1px solid #0074d9;
  background: #f4faff;
  color: #0074d9;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
  align-self: flex-start;
}

#exportPanel button:hover {
  background: #0074d9;
  color: #fff;
}


/* Layer controls */
.layer-controls {
  position: fixed;
  left: 10px;
  z-index: 2100;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
  font-family: sans-serif;
  overflow: hidden;
  font-size: 0.6rem;
}

.layer-controls.collapsed .layer-options {
  display: none;
}

.layer-options {
  display: flex;
  flex-direction: column; /* checkboxes stack vertically */
  padding: 8px 12px;
  gap: 6px;
  max-height: 70vh;
  overflow-y: auto;
  position: relative;
  min-width: 200px;
}

.toggle-button {
  background-color: #f5f5f5;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  width: 100%;
  text-align: left;
  font-weight: bold;
  border-bottom: 1px solid #ccc;
}


/* Custom scrollbar styling */
.layer-options::-webkit-scrollbar {
  width: 8px;
}

.layer-options::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.layer-options::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

.layer-options::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}


/* Fade effect at bottom when scrollable */
.layer-options::after {
  content: '';
  position: sticky;
  bottom: 0;
  height: 20px;
  background: linear-gradient(transparent, rgba(255, 255, 255, 0.9));
  pointer-events: none;
  margin: 0 -12px -8px -12px;
}


/* Grid for categories */
#layerCheckboxes {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
  margin-bottom: 8px;
  max-height: 300px;
  overflow-y: auto;
}


/* Each category dropdown */
#layerCheckboxes details {
  margin-bottom: 0;
  border-radius: 5px;
  background: #f7f7f7;
  border: 1px solid #eaeaea;
  padding: 2px 0 2px 0;
  box-shadow: 0 1px 2px rgba(0,0,0,0.03);
  min-width: 0;
}


/* Category summary */
#layerCheckboxes summary {
  font-weight: 600;
  cursor: pointer;
  font-size: 0.98rem;
  padding: 4px 8px;
  border-radius: 5px;
  background: #e9ecef;
  outline: none;
  transition: background 0.2s;
  margin-bottom: 2px;
}

#layerCheckboxes summary:focus {
  background: #d0e6fa;
}


/* Layer checkbox row */
#layerCheckboxes div {
  margin-bottom: 2px;
  padding-left: 8px;
  display: flex;
  align-items: center;
}


/* Layer label */
#layerCheckboxes label {
  margin-left: 6px;
  font-size: 0.93rem;
  color: #222;
}


/* Checkbox */
#layerCheckboxes input[type="checkbox"] {
  accent-color: #0074d9;
  width: 15px;
  height: 15px;
}

/* Responsive: adjust top for taller mobile header */
@media (max-width: 700px) {
  .layer-controls {
    top: 80px; /* increase if your mobile header is taller */
  }
}


/* New styles for groups */
.layer-group {
  margin-bottom: 8px;
}

.group-header {
  font-weight: bold;
  cursor: pointer;
  background-color: #eee;
  padding: 6px 8px;
  margin: 0;
  user-select: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  border-radius: 4px;
}

.group-header:focus {
  outline: 2px solid #007acc;
}

/* Arrow styling in header: using pseudo element */
.group-header::after {
  content: '▸'; /* default collapsed arrow */
  font-size: 0.6rem;
  transition: transform 0.2s ease;
}

.group-header.expanded::after {
  content: '▾'; /* expanded arrow */
}

.group-content {
  padding-left: 12px;
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Align checkbox text with checkbox center */
.group-content label {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  font-size: 0.75rem;
  line-height: 1.2;
  padding-top: 3px;
}

.group-content input[type="checkbox"] {
  margin: 0;
  flex-shrink: 0;
}

.group-content.collapsed {
  display: none;
}

/* popup listed buildings */

.listed-popup-content {
  font-size: 12px;
}

/* When popup is shown inside the sidebar */
.listed-popup-content.in-sidebar {
  position: static;
  width: 100%;
  max-height: none;
  overflow: visible;
  background: none;
  border: none;
  box-shadow: none;
  padding: 0;
  margin-bottom: 20px; /* Optional spacing between multiple entries */
}

.listed-popup-content table {
  margin-bottom: 6px;
  width: 100%;
  border-collapse: collapse;
}

.listed-popup-content td {
  padding: 2px 4px;
  vertical-align: top;
}

.listed-popup-content a {
  color: #0066cc;
  text-decoration: underline;
}

.popup-close-btn {
  position: static;
  top: auto;
  right: auto;
  margin-left: 10px;
  font-size: 1.2em;
}

#popup-close-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  cursor: pointer;
  border: none;
  background: transparent;
  font-weight: bold;
  font-size: 16px;
}

.popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.popup-title {
  font-weight: bold;
  font-size: 1.1em;
}

.toggle-btn {
  font-size: 14px;
  cursor: pointer;
  padding: 2px 6px;
  border: none;
  background: #ddd;
  border-radius: 3px;
}

#toggle-table-btn {
  margin-left: 10px;
  font-size: 0.9em;
  cursor: pointer;
  border: none;
  background: none;
  padding: 2px 6px;
}

#popup-table {
  margin-top: 10px;
  font-size: 0.85em;
  width: 100%;
  border-collapse: collapse;
}

#popup-table td {
  padding: 4px 6px;
  vertical-align: top;
}

.popup-table.hidden {
  display: none;
}

.popup-panel {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 320px;
  max-height: 300px;
  overflow: auto;
  background: white;
  border: 1px solid #999;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  padding: 10px;
  z-index: 1000;
}

#move-popup-btn {
  cursor: pointer;
  padding: 4px 8px;
  margin-top: 6px;
  background: #f0f0f0;
  border: 1px solid #ccc;
}

/* Only absolutely position the close button when in the popup (not in sidebar) */
.maplibregl-popup #popup-close-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  cursor: pointer;
  border: none;
  background: transparent;
  font-weight: bold;
  font-size: 16px;
}

/* In the sidebar, use static positioning */
#sidebar-content .popup-close-btn {
  position: static;
  top: auto;
  right: auto;
  margin-left: 10px;
  font-size: 1.2em;
  background: transparent;
  border: none;
  cursor: pointer;
}


/* Legend styling - unified for all legends */
.map-legend {
  margin-top: 10px;
  font-size: 0.95em;
  margin-left: 15px;
  margin-bottom: 8px;
}

#ntow-legend, #social-infrastructure-legend, #landuse-legend, #historic-legend, #agricultural-legend, #hydrogelogy-legend, #prow-legend, #natural-environment-legend {
  margin-top: 10px;
  font-size: 0.95em;
  margin-left: 15px;
  margin-bottom: 8px;
  display: none;
}

.map-legend > div,
#ntow-legend > div, #social-infrastructure-legend > div, #landuse-legend > div, #historic-legend > div, #agricultural-legend > div, #hydrogelogy-legend > div, #prow-legend > div, #natural-environment-legend > div {
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  line-height: 1.5;
}

.map-legend span,
#ntow-legend span, #social-infrastructure-legend span, #landuse-legend span, #historic-legend span, #agricultural-legend span, #hydrogelogy-legend span, #prow-legend span, #natural-environment-legend span {
  margin-right: 10px;
  flex-shrink: 0;
  color: #333;
  font-size: 13px;
}

.map-legend strong,
#ntow-legend strong, #social-infrastructure-legend strong, #landuse-legend strong, #historic-legend strong, #agricultural-legend strong, #hydrogelogy-legend strong, #prow-legend strong, #natural-environment-legend strong {
  margin-bottom: 2px;
  display: block;
  font-size: 1.1em;
}

.map-legend {
    position: absolute;
    bottom: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    font-family: Arial, sans-serif;
    font-size: 14px;
    max-width: 200px;
    z-index: 1000;
}

.map-legend h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    font-weight: bold;
    color: #333;
}

.map-legend h4 {
    margin: 10px 0 5px 0;
    font-size: 14px;
    font-weight: bold;
    color: #555;
    border-bottom: 1px solid #ddd;
    padding-bottom: 3px;
}

.legend-section:first-child h4 {
    margin-top: 0;
}

.legend-item {
    display: flex;
    align-items: center;
    margin: 5px 0;
    gap: 10px;
}

.legend-color {
    width: 20px;
    height: 15px;
    border: 1px solid #ccc;
    border-radius: 3px;
}

.legend-pattern {
    width: 20px;
    height: 15px;
    border: 1px solid #ccc;
    border-radius: 3px;
    background-repeat: repeat;
}

.legend-line {
    width: 20px;
    height: 3px;
    border-radius: 1px;
}

.legend-item span {
    color: #333;
    font-size: 13px;
}

/* Remove duplicate standardization block, now unified above */

.legend-ancient-woodland { background: #228b22; border: 1px solid #006400; }
.legend-aonb-fill { background: #ccebc5; border: 1px solid #006d2c; }
.legend-grass { background: #7CFC00; border: 1px solid #228B22; }
.legend-lnr-fill { background: #b3cde3; border: 1px solid #045a8d; }
.legend-nnr-fill { background: #fbb4ae; border: 1px solid #99000d;}
.legend-tpz { background: #8B4513; border: 1px solid #000000; }
.legend-woodland { background: rgba(34,139,34,0.5); border: 1px solid #006400; }

.legend-lone-tree    { background: #00a884; border-color: #006d2c; }
.legend-group-trees  { background: #4ae700; border-color: #2d5016; }
.legend-nfi-ohc      { background: #6fa803; border-color: #4a7002; }
.legend-small-wood   { background: #0ae6a9; border-color: #087a5c; }
.legend-other        { background: #cccccc; border-color: #999999; }

.legend-amenity      { background: #f8bbd0; border-color: #ffffff; }
.legend-cemeteries   { background: url('images/black-hatch.png'); background-size: 20px 20px; background-repeat: repeat; border-color: #000; }
.legend-educational  { background: #fff176; border-color: #666; }
.legend-hospitals    { background: #f28cb1; border-color: #d63384; }
.legend-shop         { background: #ce93d8; border-color: #ffffff; }
.legend-schools      { background: #ffe699; border-color: #e6cc00; }
.legend-stadiums     { background: #a1d99b; border-color: #4a854a; }
.legend-tourism      { background: #81d4fa; border-color: #ffffff; }


.legend-article4   { background: rgba(240, 230, 140, 0.15); border: 1px solid #000000; }
.legend-conservation { background: #e6f3ff; border: 1px solid #0066cc; }
.legend-heritage-park { background: #c1f7a1; border: 1px solid #598145; }
.legend-listed-building { background: #b3cde0; border: 1px solid #6495ed; border-radius: 50%; }
.legend-scheduled-monument { background: #f06a6c; border: 1px solid #a94442; }
.legend-whs-buffer { background: url('images/gold-hatch.png'); border: 1px solid #FFD700; }
.legend-whs-core   { background: #FFC300; border: 1px solid #B8860B; }
.legend-symbol {
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  vertical-align: middle;
}

.legend-builtup {
  background: #FF6B6B;
  border: 1px solid #CC5555;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  vertical-align: middle;
}
.legend-residential {
  background: #f4a261;
  border: 1px solid #f4a261;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  vertical-align: middle;
}
.legend-lpb {
  background: #ff7f0e;
  border-color: #cc5500;
}

.legend-agricultural-grade1 {
  background: #228B22;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #006400;
}
.legend-agricultural-grade2 {
  background: #32CD32;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #228B22;
}
.legend-agricultural-grade3a {
  background: #9ACD32;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #6B8E23;
}
.legend-agricultural-grade3b {
  background: #ADFF2F;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #9ACD32;
}
.legend-agricultural-grade4 {
  background: #FFFF99;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #CCCC00;
}
.legend-agricultural-grade5 {
  background: #DDD;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #999;
}

.legend-hydro-1b {
  background: #a6cee3;
  border-color: #888;
  width: 14px;
  height: 14px;
  display: inline-block;
  margin-right: 6px;
  border: 1px solid #888;
  vertical-align: middle;
}
.legend-hydro-2a {
  background: #1f78b4;
  border-color: #888;
  width: 14px;
  height: 14px;
  display: inline-block;
  margin-right: 6px;
  border: 1px solid #888;
  vertical-align: middle;
}
.legend-hydro-1c {
  background: #b2df8a;
  border-color: #888;
  width: 14px;
  height: 14px;
  display: inline-block;
  margin-right: 6px;
  border: 1px solid #888;
  vertical-align: middle;
}
.legend-hydro-3 {
  background: #fdbf6f;
  border-color: #888;
  width: 14px;
  height: 14px;
  display: inline-block;
  margin-right: 6px;
  border: 1px solid #888;
  vertical-align: middle;
}
.legend-hydro-other {
  background: #cccccc;
  border-color: #888;
  width: 14px;
  height: 14px;
  display: inline-block;
  margin-right: 6px;
  border: 1px solid #888;
  vertical-align: middle;
}

.legend-prow-footpath {
  width: 18px;
  height: 6px;
  background: #E400FF;
  border: 1px solid #E400FF;
  border-radius: 2px;
  display: inline-block;
  margin-right: 6px;
  vertical-align: middle;
}
.legend-prow-bridleway {
  width: 18px;
  height: 6px;
  background: #0000FF;
  border: 1px solid #0000FF;
  border-radius: 2px;
  display: inline-block;
  margin-right: 6px;
  vertical-align: middle;
}
.legend-prow-restricted {
  width: 18px;
  height: 6px;
  background: #800080;
  border: 1px solid #800080;
  border-radius: 2px;
  display: inline-block;
  margin-right: 6px;
  vertical-align: middle;
}
.legend-prow-byway {
  width: 18px;
  height: 6px;
  background: #FF0000;
  border: 1px solid #FF0000;
  border-radius: 2px;
  display: inline-block;
  margin-right: 6px;
  vertical-align: middle;
}

/* Streetlighting legend symbol styles */
.legend-streetlighting-label {
  margin-bottom: 10px;
}
.legend-streetlighting-sign {
  background: url('images/streetlightingsign.png');
  background-size: 16px 10px;
  width: 16px;
  height: 10px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #FFD700;
}
.legend-streetlighting-column {
  background: #F0F8FF;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 2px solid #FFD700;
  border-radius: 50%;
}
.legend-streetlighting-other {
  background: #FFD700;
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 5px;
  border: 2px solid #B8860B;
  border-radius: 50%;
}
.legend-streetlighting-buffer {
  background: #FFF8DC;
  width: 24px;
  height: 8px;
  display: inline-block;
  margin-right: 5px;
  border: 1px solid #FFFACD;
}
.legend-streetlighting-shadow {
  background: #000000;
  opacity: 0.2;
  width: 24px;
  height: 8px;
  display: inline-block;
  margin-right: 5px;
}

/* Specific legend symbol styling */

.legend-symbol {
  width: 12px;
  height: 12px;
  display: inline-block;
  margin-right: 10px;
  border: 1px solid;
  flex-shrink: 0;
}

.legend-line-symbol {
  width: 12px;
  height: 2px;
  display: inline-block;
  margin-right: 10px;
  border: 1px solid;
  flex-shrink: 0;
}

.legend-circle {
  border-radius: 50%;
}

/* Header and search bar styles */
#header {
  position: absolute;
  top: 0;
  right: 0;
  width: 100%;
  height: 50px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  background: rgba(255, 255, 255, 0.95);
  padding: 0 20px;
  z-index: 1000;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

#search-input {
  border: none;
  outline: none;
  font-size: 13px;
  width: 170px;
}

#search-container {
  flex: 0 0 auto;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 3px;
  padding: 4px 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
  margin-left: 20px;
  max-width: 320px;
  min-width: 180px;
  font-family: inherit;
  margin-right: 20px ;
}

/* About content styles */
#about-content {
  max-width: 800px;
  margin: 0 auto;
  padding: 56px 20px 0 20px; /* Top padding matches/clears header height */
  line-height: 1.6;
  font-family: sans-serif;
  height: calc(100vh - 70px); /* Adjust for header/footer */
  overflow-y: auto;
}

#about-content h2 {
  margin-top: 56px;
}

#site-footer {
  text-align: center;
  font-size: 13px;
  color: #555;
  padding: 15px;
  border-top: 1px solid #ddd;
  margin-top: 40px;
}

/* Responsive header for mobile */
@media (max-width: 700px) {
  #site-header {
    flex-direction: column;
    align-items: stretch;
    height: auto;
    padding: 6px 4vw;
    gap: 6px;
  }
  .layer-controls {
    top: 60px;
  }
  #site-title {
    font-size: 1.1em;
    text-align: center;
    margin-bottom: 2px;
  }
  #site-header nav {
    justify-content: center;
    margin: 0;
  }
  #site-header nav a {
    font-size: 0.95em;
    margin-left: 12px;
    line-height: 1.8;
    padding: 0 2px;
  }
  #search-container {
    max-width: 100%;
    min-width: 0;
    width: 100%;
    margin: 0;
    padding: 4px 0;
    box-sizing: border-box;
    justify-content: center;
  }
  #search-input {
    width: 100%;
    min-width: 0;
    font-size: 1em;
  }
  #about-content {
    margin: 0;
    padding: 100px 8px 0 8px; 
    max-width: 100%;
    font-size: 0.98em;
  }
  #about-content h2 {
    margin-top: 32px;
    font-size: 1.1em;
  }
  #about-content ul {
    padding-left: 18px;
  }
}

@media (max-width: 768px) {
    .map-legend {
        bottom: 10px;
        right: 10px;
        font-size: 12px;
        padding: 10px;
        max-width: 150px;
    }
    
    .legend-item span {
        font-size: 11px;
    }
}

/* Sidebar title styles */
#sidebar-title {
  margin: 0;
  padding: 16px 16px 8px 16px;
  font-size: 1.4em;
  font-weight: bold;
  background: #f7f7f7;
  border-bottom: 1px solid #eee;
  position: sticky;
  top: 0;
  z-index: 10;
}

/* Responsive styles for mobile sidebar and toggle button */
@media (max-width: 600px) {
  #sidebar {
    position: fixed;
    right: -80vw;
    top: 0;
    width: 80vw;
    height: 100vh;
    background: #fff;
    box-shadow: -2px 0 8px rgba(0,0,0,0.15);
    z-index: 2000;
    transition: right 0.3s ease;
    overflow-y: auto;
    display: block !important;
  }
  #sidebar.open {
    right: 0;
  }
  #sidebar-toggle-btn {
    display: block;
    position: fixed;
    top: 16px;
    right: 16px;
    z-index: 2100;
    background: #0078d7;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 10px 16px;
    font-size: 18px;
  }
  #sidebar-close-btn {
    position: absolute;
    top: 58px;
    right: 10px;
    z-index: 2101;
    background-color: #f5f5f5;
    border: none;
    padding: 8px 12px;
    font-weight: bold;
    border-radius: 4px;
    font-size: 1em;
    color: #333;
    box-shadow: none;
    cursor: pointer;
    width: auto;
    height: auto;
    display: block;
    text-align: left;
  }
  .main {
    padding: 8px;
  }
}

/* General responsive elements */
img, iframe, video {
  max-width: 100%;
  height: auto;
}
.container, .content, main, header, footer {
  width: 100%;
  box-sizing: border-box;
}
body {
  font-size: 16px;
}